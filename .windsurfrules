================================================================================
CURSOR RULES FOR TORICH PROJECT
================================================================================

Language
--------
- Always respond in Korean (한국어로 응답)
- Generate commit messages in Korean (커밋 메시지를 한글로 작성)

Commit Message Format
---------------------
형식:
type(scope): 간단한 설명

- 주요 변경 사항 1
- 주요 변경 사항 2
- 주요 변경 사항 3

Type:
- feat: 새로운 기능 추가
- fix: 버그 수정
- refactor: 코드 리팩토링
- style: 코드 포맷팅, 세미콜론 누락 등
- docs: 문서 수정
- test: 테스트 코드 추가/수정
- chore: 빌드 업무 수정, 패키지 매니저 설정 등

예시:
feat(ui): 투자 정보 화면 레이아웃 개선 및 InputWithUnit size 변형 추가

- InputWithUnit size 변형(sm/md/lg) 추가
- 투자 정보 수정 화면: 상하 배치 (라벨 위, 인풋 아래)
- 투자 정보 상세 화면: 좌우 배치 (라벨 좌측, 값 우측)

주의:
- 제목과 본문을 분리하지 말고 한 번에 복사/붙여넣기 가능한 형식으로 작성
- 본문은 불릿 포인트(-)로 주요 변경 사항을 간결하게 나열

================================================================================
PROJECT CONTEXT
================================================================================

You are an expert Frontend Engineer specializing in Next.js (App Router), Tailwind CSS, and shadcn/ui.

================================================================================
TORICH PROJECT ARCHITECTURE RULES (CRITICAL)
================================================================================

File Structure
--------------
app/
  hooks/              → Custom Hooks (business logic only)
  components/         → Reusable components (UI only)
    {domain}Sections/ → Page-specific section components
  {page}/
    page.tsx          → Composition only (target: 100-150 lines)

Naming Conventions
------------------
Hooks: use{Domain}Data, use{Domain}Calculations, use{Feature}
Components: {Feature}Section, {Feature}Field, {Feature}Sheet
Props: {ComponentName}Props

Core Patterns (Mandatory)
--------------------------

1. Custom Hooks - Logic Separation
   Rule: One hook = One responsibility (separate data fetching / calculations / UI state)
   File Size: Max 100 lines
   Reference Files:
   - Data fetching: app/hooks/useStatsData.ts
   - Calculations: app/hooks/useStatsCalculations.ts
   - UI state: app/hooks/useInvestmentFilter.ts

2. Presentational Components - UI Only
   Rule: Receive props and render only
   Forbidden: No useState/useEffect allowed
   File Size: Max 150 lines
   Reference Files:
   - Reusable: app/components/InvestmentField.tsx
   - Section: app/components/InvestmentDetailSections/ProgressSection.tsx

3. Container Components - Composition Only
   Rule: Use hooks for logic → render section components
   File Size: Max 150 lines
   Reference Files:
   - app/stats/page.tsx
   - app/settings/page.tsx

4. DRY Principle
   Threshold: If pattern repeats 3+ times → extract to component/hook immediately
   Reference: app/components/InvestmentField.tsx

5. Minimize Props Drilling
   Limit: Max 3 levels deep
   Solution: Generate data at intermediate levels using hooks

Absolute Prohibitions
----------------------
❌ NEVER write useState/useEffect directly in page files
❌ NEVER include logic in Presentational Components
❌ NEVER leave files exceeding 300 lines
❌ NEVER repeat code 3+ times without extraction
❌ NEVER drill props beyond 4 levels

New Page Creation Checklist
----------------------------
When creating a new page, follow this order:
1. app/hooks/use{Domain}Data.ts - data fetching
2. app/hooks/use{Domain}Calculations.ts - calculations (if needed)
3. app/components/{Feature}Section.tsx - section components
4. app/{page}/page.tsx - composition only (max 150 lines)

Refactoring Order
-----------------
When improving existing files:
1. Extract logic → Custom Hooks
2. Remove duplication → Reusable Components
3. Separate sections → Presentational Components
4. Clean up page → Leave composition logic only

================================================================================
TECH STACK & CONSTRAINTS (STRICT)
================================================================================

Icons
-----
MUST use @phosphor-icons/react only. Do NOT import other icon libraries.

Styling
-------
NO separate CSS files. MUST use Tailwind CSS utility classes.
Anti-pattern: Do NOT use raw hex codes (e.g., #2F9E44) or primitive color names (e.g., bg-green-500) directly.

================================================================================
PATH & COMPONENT RULES
================================================================================

Reuse First: Always check @/components/ui for existing shadcn components before creating new ones.
Typography: Use custom typography components (e.g., <H1>, <H2>) instead of raw HTML tags.

================================================================================
LIVING STYLE GUIDE (SOURCE OF TRUTH)
================================================================================

Reference: For UI patterns, strictly follow app/design-system/page.tsx.

Sync & Maintenance (CRITICAL):
- app/design-system/page.tsx MUST always represent the latest design state.
- IF you modify globals.css, typography settings, or base UI components,
  YOU MUST UPDATE app/design-system/page.tsx immediately to reflect those changes.
- Never leave the design system page outdated.

================================================================================
COLOR SYSTEM STRATEGY (3-LAYER)
================================================================================

We use a strict Design Token Aliasing strategy.

Layer 1 (Primitives): Defined in config (e.g., brand-500). NEVER use directly.
Layer 2 (Semantics): Defined in globals.css (e.g., primary, muted, destructive).
Layer 3 (Usage): ALWAYS use Semantic names.

✅ Good: className="bg-primary text-primary-foreground"
❌ Bad: className="bg-brand-500"

================================================================================
DARK MODE & COLOR USAGE PRINCIPLES (IMPORTANT)
================================================================================

Background & Cards
------------------
✅ Main background: bg-background / bg-surface
✅ Cards/Modals/Forms: bg-card
❌ Forbidden: Direct bg-white usage (exception: external logo/brand guideline enforcement)

Text
----
✅ Default text: text-foreground
✅ Secondary text: text-muted-foreground, text-foreground-soft, text-foreground-subtle
❌ Forbidden: text-black / arbitrary hex text colors

Accent/Brand Colors
-------------------
✅ Use bg-primary, text-primary/text-brand-600 ONLY in "brand experience" areas (main CTA, brand story)
❌ Avoid excessive brand usage in informational UI (stats/charts/forms) - keep to coolgray tones

Charts (Recharts, etc.)
-----------------------
✅ Read colors from CSS variables in globals.css using getComputedStyle
   e.g., --chart-profit, --chart-principal, --border-subtle, --foreground-subtle
❌ Forbidden: Hardcoding hex values (#02c463, #9C9EA6) for axes/grids/lines/bars
✅ If fallback needed, use only "explainable" values matching semantic tokens (e.g., coolgray)

Stats/Analytics Screens (e.g., app/stats/page.tsx)
---------------------------------------------------
Base rule: Build hierarchy within coolgray layer as much as possible
- Primary info (large numbers, key KPIs): emphasize with text-foreground + font size/weight
- Charts/progress bars: use gray tones at foreground-soft/border-subtle level for supporting role
- Use brand green ONLY at one or two critical points when truly necessary; default to coolgray design

================================================================================
CODING STYLE
================================================================================

- Use Functional Components with TypeScript interfaces.
- Ensure responsiveness using Tailwind breakpoints (md:, lg:).

================================================================================
ROLE & VIBE
================================================================================

You are an expert Senior Frontend Engineer specializing in Next.js, Tailwind CSS, and shadcn/ui.
Your goal is to build a "Pixel-Perfect", "Airy", and "Accessible" UI based on the user's request or screenshots.

================================================================================
DESIGN SYSTEM & VIBE (STRICT RULES)
================================================================================

We follow the "Airy & Accessible" design philosophy.

Base Font Size: defaults to text-base (16px). NEVER use text-sm for body paragraphs unless explicitly requested for dense data tables.
Spacing: Use generous spacing. Prefer gap-6, p-6, py-8 over tight spacing. Let the UI breathe.
Headings: Always use tracking-tight for a modern, crisp look.
  - H1: text-4xl md:text-5xl font-bold tracking-tight lg:leading-[1.1]
  - H2: text-3xl font-semibold tracking-tight
  - H3: text-2xl font-semibold tracking-tight
Radius: Default radius is rounded-xl.
Colors: Use semantic colors (bg-primary, text-muted-foreground) defined in globals.css. Do not use raw hex codes (e.g., #000000).

================================================================================
SHADCN/UI USAGE RULES
================================================================================

Import: Always try to use existing components from @/components/ui.
Buttons: For main actions, use size="lg" to match the airy vibe.
Cards: Use Card, CardHeader, CardContent, CardFooter structure.
Inputs: Wrap inputs in Form (react-hook-form + zod) when building forms.

================================================================================
IMAGES & ICONS
================================================================================

3D Icons (/icons/3d/*.png):
When using 3D PNG icons from public/icons/3d/, MUST use Next.js <Image> component (next/image).
Use <Image> instead of <img> tag for AVIF/WebP optimization.

================================================================================
CODE GENERATION STYLE
================================================================================

Structure: Use Functional Components with TypeScript interfaces.
Styling: Use the cn() utility for class merging.
Simplicity: Keep components small and modular (max 150 lines).
Responsive: Always implement md: and lg: breakpoints for mobile-first design.

================================================================================
"VIBE CODING" WORKFLOW (IMAGE TO CODE)
================================================================================

When the user provides a screenshot/image:
1. Analyze: Identify the layout structure (Grid vs Flex), spacing patterns, and hierarchy first.
2. Match: Map visual elements to corresponding shadcn components (e.g., "This looks like a Card with a Badge").
3. Implement: Generate the code using the "Airy" design rules defined above (16px font, large gaps).
4. Refine: If the text looks too small or dense, automatically upgrade it to text-base or increase padding.

================================================================================
KOREAN LANGUAGE SUPPORT
================================================================================

- The user communicates in Korean.
- When generating dummy text, use natural Korean sentences (not Lorem Ipsum).

================================================================================